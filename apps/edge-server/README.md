# STC AI-VAP Edge Server

ุฎุงุฏู ุงููEdge ูุณุคูู ุนู ุชุดุบูู ููุงุฐุฌ ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ูุนุงูุฌุฉ ุงูููุฏููุ ุงูุชูุงููุงุช (Modbus/Arduino/GPIO/MQTT)ุ ูุชุฎุฒูู ุงููุณุงุฆุท ูุญูููุง ูุน ูุฒุงููุฉ ุงูููุชุงุฏุงุชุง ููุท ุฅูู ุงูุณุญุงุจุฉ.

## ๐ ุงูุชุดุบูู ุงูุณุฑูุน
1) ุชุซุจูุช ุงููุชุทูุจุงุช
```bash
pip install -r requirements.txt
```

2) ุถุจุท ุงูุจูุฆุฉ
```bash
cp .env.example .env
# ุนุฏูู CLOUD_API_URL ู LICENSE_KEY ูุจุงูู ุงูุฅุนุฏุงุฏุงุช ุญุณุจ ูููุนู
```
ุฃู ุงุณุชุฎุฏู ูุนุงูุฌ ุงูุฅุนุฏุงุฏ ุนุจุฑ ุงููุชุตูุญ: `http://localhost:8080/setup`

3) ุงูุชุดุบูู
```bash
uvicorn main:app --host 0.0.0.0 --port 8080
```

## โ๏ธ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ุงูุฃุณุงุณูุฉ
| ุงููุชุบูุฑ | ุงููุตู | ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ |
| --- | --- | --- |
| CLOUD_API_URL | ุฑุงุจุท ุฎุงุฏู ุงูุณุญุงุจุฉ (FastAPI ุนูู ุงููVPS) | Required |
| CLOUD_API_KEY | ููุชุงุญ ุงููุตูู ูููAPI (ุงุฎุชูุงุฑู ุฅุฐุง ุชู ุชูุนููู) | ูุงุฑุบ |
| LICENSE_KEY | ููุชุงุญ ุงูุชุฑุฎูุต ุงููุฑุชุจุท ุจุงูููุธูุฉ ูุงููEdge | Required |
| SERVER_HOST | ุนููุงู ุงูุงุณุชูุงุน | 0.0.0.0 |
| SERVER_PORT | ุงููููุฐ | 8080 |
| SYNC_INTERVAL | ูุชุฑุฉ ุฅุนุงุฏุฉ ูุญุงููุฉ ุงููุฒุงููุฉ (ุซูุงูู) | 30 |
| HEARTBEAT_INTERVAL | ูุชุฑุฉ ูุจุถุงุช ุงูุญุงูุฉ (ุซูุงูู) | 60 |
| DATA_DIR | ูุฌูุฏ ุงูุจูุงูุงุช (ุงููุณุงุฆุท/ุงููุงุด/ุงูุทุงุจูุฑ) | data |
| LOG_DIR | ูุฌูุฏ ุงูุณุฌูุงุช | logs |
| LOG_LEVEL | ูุณุชูู ุงูุณุฌูุงุช | INFO |
| MAX_CAMERAS | ุงูุญุฏ ุงูุฃูุตู ูููุงููุฑุงุช | 16 |
| PROCESSING_FPS | ูุนุฏู ุงูุฅุทุงุฑุงุช ููุชุญููู | 5 |
| FACE_CONFIDENCE | ุนุชุจุฉ ุซูุฉ ุงููุฌูู | 0.6 |
| OBJECT_CONFIDENCE | ุนุชุจุฉ ุงููุงุฆูุงุช | 0.5 |
| FIRE_CONFIDENCE | ุนุชุจุฉ ุงูุญุฑุงุฆู | 0.7 |

> ูุชู ุญูุธ ุงูุชุญูู ูู ุงูุชุฑุฎูุต ูุญูููุง ุจูุง ูู ุฐูู ูุชุฑุฉ ุณูุงุญ 14 ููููุง ุจุนุฏ ุงูุชูุงุก ุงูุตูุงุญูุฉ ููุณูุงุญ ุจุงูุชุดุบูู ุฃูููุงูู.

## ๐ ููุงุท ุงููAPI ุงูุฑุฆูุณูุฉ
- `GET /` ู`/health` โ ูุญูุตุงุช ุงูุญุงูุฉ.
- `GET /setup` โ ูุนุงูุฌ ุงูุชููุฆุฉ ุงูุฃููู (ุงูุฑุจุท ูุน ุงูุณุญุงุจุฉ + ุงูุชุฑุฎูุต).
- `GET /api/v1/status` โ ุญุงูุฉ ุงููุธุงู ุงูุชูุตูููุฉ.
- `GET /api/v1/cameras` โ ูุงุฆูุฉ ุงููุงููุฑุงุช.
- `GET /api/v1/modules` โ ูุงุฆูุฉ ุงูููุฏูููุงุช ูุฎุตุงุฆุตูุง.
- `GET /api/v1/system/info` โ ูุนูููุงุช ุงูุนุชุงุฏ ูุงููุธุงู.

## ๐๏ธ ุฃูุงูุฑ ุงูุฎุฏูุฉ (Windows)
```bash
python main.py install   # ุชุซุจูุช ูุฎุฏูุฉ
python main.py remove    # ุฅุฒุงูุฉ ุงูุฎุฏูุฉ
net start STCAIVAPEdgeServer
net stop STCAIVAPEdgeServer
```

## ๐ฆ ุงูุจูุงุก (Windows)
1) ุชุซุจูุช ุงููุชุทูุจุงุช ุงูุฅุถุงููุฉ:
```bash
pip install pyinstaller pywin32
```
2) ุจูุงุก ุงูุชูููุฐู:
```bash
pyinstaller edge_server.spec
```
3) ุจูุงุก ุงูููุซุจูุช (Inno Setup ูุทููุจ):
```bash
iscc installer/setup.iss
```
ุงููุชูุฌุฉ ูู `dist/installer/`.

## ๐ฌ ุงูุฏุนู
- Email: support@stc-solutions.com
- Website: https://stc-solutions.com
